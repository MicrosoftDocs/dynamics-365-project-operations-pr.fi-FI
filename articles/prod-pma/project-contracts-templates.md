---
title: Synkronoi projektisopimukset ja projektit suoraan Project Service Automationista Financeen
description: Tässä aiheessa kuvataan malli ja sen pohjana olevat tehtävät, joita käytetään projektisopimusten ja projektien synkronoimiseen suoraan Microsoft Dynamics 365 Project Service Automationista Dynamics 365 Financeen.
author: Yowelle
manager: AnnBe
ms.date: 12/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 319000e6a826580049e8575def5790ab595a3165
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 02/15/2021
ms.locfileid: "5289590"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance"></a><span data-ttu-id="4116d-103">Synkronoi projektisopimukset ja projektit suoraan Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-103">Synchronize project contracts and projects directly from Project Service Automation to Finance</span></span> 

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="4116d-104">Tässä aiheessa kuvataan malli ja sen pohjana olevat tehtävät, joita käytetään projektisopimusten ja projektien synkronoimiseen suoraan Dynamics 365 Project Service Automationista Dynamics 365 Financeen.</span><span class="sxs-lookup"><span data-stu-id="4116d-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="4116d-105">Jos käytössäsi on Enterprise Edition 7.3.0, sinun täytyy asentaa tietokanta 4074835.</span><span class="sxs-lookup"><span data-stu-id="4116d-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="4116d-106">Tietovuo Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="4116d-107">Ennen kuin voit käyttää Project Service Automationin integrointiratkaisua Financeen, sinun on tunnettava Dynamics 365:n tietojen integrointitoiminto.</span><span class="sxs-lookup"><span data-stu-id="4116d-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="4116d-108">Project Service Automationin integrointiratkaisua Financeen käyttää tietojen integrointitoimintoa tietojen synkronointiin Project Service Automationin ja Financen eri esiintymien välillä.</span><span class="sxs-lookup"><span data-stu-id="4116d-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="4116d-109">Tietojen integrointitoiminnossa käytettävissä oleva integrointimalli mahdollistaa projektisopimusten, projektien, projektisopimuksen rivien ja projektisopimuksen rivien välitavoitteiden tietovuon Project Service Automationista Financeen.</span><span class="sxs-lookup"><span data-stu-id="4116d-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="4116d-110">Seuraavassa kuvassa on esitetty, miten tiedot synkronoidaan Project Service Automationin ja Financen välillä.</span><span class="sxs-lookup"><span data-stu-id="4116d-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="4116d-111">[![Tietovuo Project Service Automationin Financeen integroinnissa](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="4116d-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="4116d-112">Mallit ja tehtävät</span><span class="sxs-lookup"><span data-stu-id="4116d-112">Templates and tasks</span></span>

<span data-ttu-id="4116d-113">Jos haluat käyttää käytettävissä olevia malleja, valitse Microsoft Power Appsin hallintakeskuksessa **Projektit** ja sitten oikeassa yläkulmassa **Uusi projekti** valitaksesi julkisia malleja.</span><span class="sxs-lookup"><span data-stu-id="4116d-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="4116d-114">Seuraavia malleja ja pohjana olevia tehtäviä käytetään projektisopimusten ja projektien synkronoimiseen Project Service Automationista Financeen:</span><span class="sxs-lookup"><span data-stu-id="4116d-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="4116d-115">Integrointi Dynamics 365 Project Service Automationin versioon v2.x</span><span class="sxs-lookup"><span data-stu-id="4116d-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="4116d-116">**Mallin nimi tietojen integroinnissa:** Projektit ja sopimukset (Project Service Automationista Financeen)</span><span class="sxs-lookup"><span data-stu-id="4116d-116">**Name of the template in Data integration:** Projects and contracts (Project Service Automation to Finance)</span></span>
- <span data-ttu-id="4116d-117">**Projektin tehtävien nimet:**</span><span class="sxs-lookup"><span data-stu-id="4116d-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="4116d-118">Projektisopimukset Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-118">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-119">Projektit Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-119">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-120">Projektisopimusrivit Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-120">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-121">Projektisopimusrivien välitavoitteet Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-121">Project contract line milestones Project Service Automation to Finance</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="4116d-122">Integrointi Dynamics 365 Project Service Automationin versioon v3.x</span><span class="sxs-lookup"><span data-stu-id="4116d-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="4116d-123">Project Service Automationissa on rakennemuutos, joka vaikuttaa projektisopimuksen rivien välitavoitemalliin, ja mallin v2-version käyttöä tarvitaan Project Service Automationin version v3.x integroimiseksi Dynamics 365:een.</span><span class="sxs-lookup"><span data-stu-id="4116d-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="4116d-124">**Mallin nimi tietojen integroinnissa:** Projektit ja sopimukset (Project Service Automation 3.x -versiosta Financeen) - v2</span><span class="sxs-lookup"><span data-stu-id="4116d-124">**Name of the template in Data integration:** Projects and Contracts (Project Service Automation 3.x to Finance) - v2</span></span>
- <span data-ttu-id="4116d-125">**Projektin tehtävien nimet:**</span><span class="sxs-lookup"><span data-stu-id="4116d-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="4116d-126">Projektisopimukset Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-126">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-127">Projektit Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-127">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-128">Projektisopimusrivit Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-128">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="4116d-129">Projektisopimusrivien välitavoitteet Project Service Automationista Financeen</span><span class="sxs-lookup"><span data-stu-id="4116d-129">Project contract line milestones Project Service Automation to Finance</span></span>

<span data-ttu-id="4116d-130">Tilit on synkronoitava, ennen kuin projektisopimuksia ja projekteja voi esiintyä.</span><span class="sxs-lookup"><span data-stu-id="4116d-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="4116d-131">Entiteettijoukko</span><span class="sxs-lookup"><span data-stu-id="4116d-131">Entity set</span></span>

| <span data-ttu-id="4116d-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="4116d-132">Project Service Automation</span></span>       | <span data-ttu-id="4116d-133">Rahoitus</span><span class="sxs-lookup"><span data-stu-id="4116d-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="4116d-134">Tilaukset</span><span class="sxs-lookup"><span data-stu-id="4116d-134">Orders</span></span>                           | <span data-ttu-id="4116d-135">Projektisopimuksen integroinnin entiteetti</span><span class="sxs-lookup"><span data-stu-id="4116d-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="4116d-136">Projektit</span><span class="sxs-lookup"><span data-stu-id="4116d-136">Projects</span></span>                         | <span data-ttu-id="4116d-137">Projektin integroinnin entiteetti</span><span class="sxs-lookup"><span data-stu-id="4116d-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="4116d-138">Tilausrivit</span><span class="sxs-lookup"><span data-stu-id="4116d-138">Order lines</span></span>                      | <span data-ttu-id="4116d-139">Projektisopimuksen rivin integroinnin entiteetti</span><span class="sxs-lookup"><span data-stu-id="4116d-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="4116d-140">Projektisopimusrivien välitavoitteet</span><span class="sxs-lookup"><span data-stu-id="4116d-140">Project contract line milestones</span></span> | <span data-ttu-id="4116d-141">Projektisopimuksen rivien välitavoitteiden integroinnin entiteetti</span><span class="sxs-lookup"><span data-stu-id="4116d-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="4116d-142">Entiteettivuo</span><span class="sxs-lookup"><span data-stu-id="4116d-142">Entity flow</span></span>

<span data-ttu-id="4116d-143">Projektisopimuksia hallitaan Project Service Automationissa, ja ne synkronoidaan Financeen projektisopimuksina.</span><span class="sxs-lookup"><span data-stu-id="4116d-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="4116d-144">Voit määrittää projektisopimuksen integroinnin lähteen Financessa osana integrointimallia.</span><span class="sxs-lookup"><span data-stu-id="4116d-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="4116d-145">Aika-, materiaali- ja kiinteähintaisia projekteja hallitaan Project Service Automationissa, ja ne synkronoidaan Financeen projekteina.</span><span class="sxs-lookup"><span data-stu-id="4116d-145">Time and material and fixed-price projects are managed in Project Service Automation and synchronized to Finance as projects.</span></span> <span data-ttu-id="4116d-146">Osana malli-integrointia voit määrittää projektin integrointilähteen Financessa.</span><span class="sxs-lookup"><span data-stu-id="4116d-146">As part of the template integration, you can set the integration source for the project in Finance.</span></span> <span data-ttu-id="4116d-147">Tällä hetkellä tuetaan vain aika- ja materiaali- sekä kiinteähintaisia projekteja.</span><span class="sxs-lookup"><span data-stu-id="4116d-147">Currently, only time and material and fixed-price projects are supported.</span></span>


<span data-ttu-id="4116d-148">Projektisopimuksen rivejä hallitaan Project Service Automationissa, ja ne synkronoidaan Financeen sopimuksen laskutussääntöinä.</span><span class="sxs-lookup"><span data-stu-id="4116d-148">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="4116d-149">Jos laskutustapa poikkeaa oletusarvoisesta projektityypistä, synkronointi päivittää sopimusrivi projektin ja projektiryhmän projektityypin.</span><span class="sxs-lookup"><span data-stu-id="4116d-149">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="4116d-150">Projektisopimuksen rivejä hallitaan Project Service Automationissa, ja ne synkronoidaan Financeen sopimuksen laskutussääntöjen välitavoitteina.</span><span class="sxs-lookup"><span data-stu-id="4116d-150">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="4116d-151">Project Service Automationista Financeen integroinnin ratkaisu</span><span class="sxs-lookup"><span data-stu-id="4116d-151">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="4116d-152">**Projektisopimuksen tunnus** -kenttä on käytettävissä **Projektisopimukset**-sivulla.</span><span class="sxs-lookup"><span data-stu-id="4116d-152">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="4116d-153">Tämä kenttä on tehty luonnolliseksi ja yksilölliseksi avaimeksi integroinnin tukemiseksi.</span><span class="sxs-lookup"><span data-stu-id="4116d-153">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="4116d-154">Kun uusi projektisopimus luodaan eikä **Projektisopimuksen tunnus** -arvoa vielä ole olemassa, se luodaan automaattisesti numerosarjan avulla.</span><span class="sxs-lookup"><span data-stu-id="4116d-154">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="4116d-155">Arvo alkaa kirjaimilla **ORD**, joiden perässä on kasvava numerosarja ja sitten kuuden merkin jälkiliite.</span><span class="sxs-lookup"><span data-stu-id="4116d-155">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="4116d-156">Esimerkki: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="4116d-156">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="4116d-157">**Projektinumero**-kenttä on käytettävissä **Projektit**-sivulla.</span><span class="sxs-lookup"><span data-stu-id="4116d-157">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="4116d-158">Tämä kenttä on tehty luonnolliseksi ja yksilölliseksi avaimeksi integroinnin tukemiseksi.</span><span class="sxs-lookup"><span data-stu-id="4116d-158">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="4116d-159">Kun uusi projekti luodaan eikä **Projektinumero** -arvoa vielä ole olemassa, se luodaan automaattisesti numerosarjan avulla.</span><span class="sxs-lookup"><span data-stu-id="4116d-159">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="4116d-160">Arvo alkaa kirjaimilla **PRJ**, joiden perässä on kasvava numerosarja ja sitten kuuden merkin jälkiliite.</span><span class="sxs-lookup"><span data-stu-id="4116d-160">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="4116d-161">Esimerkki: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="4116d-161">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="4116d-162">Kun käytetään Project Service Automationin Finenceen integroinnin ratkaisua, päivityskomentosarja määrittää **Projektisopimuksen tunnus** -kentän olemassa oleville projektisopimuksille sekä **Projektinumero**-kentän Project Service Automationissa oleville projekteille.</span><span class="sxs-lookup"><span data-stu-id="4116d-162">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="4116d-163">Edellytykset ja yhdistämismääritykset</span><span class="sxs-lookup"><span data-stu-id="4116d-163">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="4116d-164">Tilit on synkronoitava, ennen kuin projektisopimuksia ja projekteja voi esiintyä.</span><span class="sxs-lookup"><span data-stu-id="4116d-164">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="4116d-165">Lisää yhteysjoukkoosi integrointiavaimen kenttämääritys kohteelle **msdyn\_organizationalunits** to **msdyn\_name \[Nimi\]**.</span><span class="sxs-lookup"><span data-stu-id="4116d-165">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="4116d-166">Sinun täytyy ehkä ensin lisätä projekti yhteysjoukkoon.</span><span class="sxs-lookup"><span data-stu-id="4116d-166">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="4116d-167">Lisätietoja [Tietojen integrointi Common Data Serviceen sovelluksille](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="4116d-167">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="4116d-168">Lisää yhteysjoukkoosi integrointiavaimen kenttämääritys kohteelle **msdyn\_projects** to **msdynce\_projectnumber \[Projektinumero\]**.</span><span class="sxs-lookup"><span data-stu-id="4116d-168">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="4116d-169">Sinun täytyy ehkä ensin lisätä projekti yhteysjoukkoon.</span><span class="sxs-lookup"><span data-stu-id="4116d-169">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="4116d-170">Lisätietoja [Tietojen integrointi Common Data Serviceen sovelluksille](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="4116d-170">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="4116d-171">**SourceDataID**, jotta projektisopimukset ja projektit voidaan päivittää eri arvoon tai poistaa yhdistämismäärityksestä.</span><span class="sxs-lookup"><span data-stu-id="4116d-171">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="4116d-172">Mallin oletusarvo on **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="4116d-172">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="4116d-173">**PaymentTerms**-yhdistämismääritys on päivitettävä vastaamaan kelvollisia maksuehtoja Financessa.</span><span class="sxs-lookup"><span data-stu-id="4116d-173">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="4116d-174">Voit myös poistaa yhdistämismäärityksen projektitehtävästä.</span><span class="sxs-lookup"><span data-stu-id="4116d-174">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="4116d-175">Oletusarvon yhdistämismäärityksissä on esittelytietojen oletusarvoja.</span><span class="sxs-lookup"><span data-stu-id="4116d-175">The default value map has default values for demo data.</span></span> <span data-ttu-id="4116d-176">Seuraavassa taulukossa esitetään arvot Project Service Automationissa.</span><span class="sxs-lookup"><span data-stu-id="4116d-176">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="4116d-177">Value</span><span class="sxs-lookup"><span data-stu-id="4116d-177">Value</span></span> | <span data-ttu-id="4116d-178">Kuvaus</span><span class="sxs-lookup"><span data-stu-id="4116d-178">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="4116d-179">1</span><span class="sxs-lookup"><span data-stu-id="4116d-179">1</span></span>     | <span data-ttu-id="4116d-180">Netto 30 pv</span><span class="sxs-lookup"><span data-stu-id="4116d-180">Net 30</span></span>        |
    | <span data-ttu-id="4116d-181">2</span><span class="sxs-lookup"><span data-stu-id="4116d-181">2</span></span>     | <span data-ttu-id="4116d-182">10 pv 2 %, 30 pv netto</span><span class="sxs-lookup"><span data-stu-id="4116d-182">2% 10, Net 30</span></span> |
    | <span data-ttu-id="4116d-183">3</span><span class="sxs-lookup"><span data-stu-id="4116d-183">3</span></span>     | <span data-ttu-id="4116d-184">Netto 45 pv</span><span class="sxs-lookup"><span data-stu-id="4116d-184">Net 45</span></span>        |
    | <span data-ttu-id="4116d-185">4</span><span class="sxs-lookup"><span data-stu-id="4116d-185">4</span></span>     | <span data-ttu-id="4116d-186">Netto 60 pv</span><span class="sxs-lookup"><span data-stu-id="4116d-186">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="4116d-187">Power Query</span><span class="sxs-lookup"><span data-stu-id="4116d-187">Power Query</span></span>

<span data-ttu-id="4116d-188">Microsoft Power Query for Excelin avulla voit suodattaa tietoja, jos seuraavat ehdot täyttyvät:</span><span class="sxs-lookup"><span data-stu-id="4116d-188">Use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="4116d-189">Sinulla on myyntitilauksia Dynamics 365 Salesissa.</span><span class="sxs-lookup"><span data-stu-id="4116d-189">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="4116d-190">Sinulla on useita organisaatioyksiköitä Project Service Automationissa, ja nämä organisaatioyksiköt yhdistetään useisiin oikeushenkilöihin Financessa.</span><span class="sxs-lookup"><span data-stu-id="4116d-190">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="4116d-191">Jos sinun on käytettävä Power Queryä, noudata seuraavia ohjeita:</span><span class="sxs-lookup"><span data-stu-id="4116d-191">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="4116d-192">Projektien ja sopimusten (PSA:sta Fin:iin ja Ops:iin) mallissa on oletussuodatin, joka sisältää vain tyypin **Työkohde (msdyn\_ordertype = 192350001)** myyntitilauksia.</span><span class="sxs-lookup"><span data-stu-id="4116d-192">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="4116d-193">Tämän suodattimen avulla voidaan varmistaa, että myyntitilauksille ei luoda projektisopimuksia Financessa.</span><span class="sxs-lookup"><span data-stu-id="4116d-193">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="4116d-194">Jos luot oman mallin, tämä suodatin on lisättävä.</span><span class="sxs-lookup"><span data-stu-id="4116d-194">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="4116d-195">Luo Power Query -suodatin, joka sisältää vain sopimusorganisaatiot, jotka synkronoidaan integroinnin yhteysjoukon yritykseen.</span><span class="sxs-lookup"><span data-stu-id="4116d-195">Create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="4116d-196">Esimerkiksi projektisopimukset, jotka sinulla on Contoso US:n sopimusorganisaatioyksikön kanssa, pitäisi synkronoida USSI-oikeushenkilöön, mutta projektisopimukset, jotka sinulla on Contoso Globalin sopimusorganisaatioyksikön kanssa, pitäisi synkronoida USMF-oikeushenkilöön.</span><span class="sxs-lookup"><span data-stu-id="4116d-196">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="4116d-197">Jos et lisää tätä suodatinta tehtävien yhdistämismääritykseen, kaikki projektisopimukset synkronoidaan yhteysjoukolle määritettyyn oikeushenkilöön sopimusorganisaatioyksiköstä riippumatta.</span><span class="sxs-lookup"><span data-stu-id="4116d-197">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="4116d-198">Mallien yhdistämismääritys tietojen integroinnissa</span><span class="sxs-lookup"><span data-stu-id="4116d-198">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="4116d-199">Kentät **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** ja **AddressZipCode** eivät ole mukana projektisopimusten oletusarvoisessa yhdistämismäärityksessä.</span><span class="sxs-lookup"><span data-stu-id="4116d-199">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="4116d-200">Voit lisätä yhdistämismääritykset, jos nämä tiedot on synkronoitava projektisopimuksissa.</span><span class="sxs-lookup"><span data-stu-id="4116d-200">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="4116d-201">Kentät **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** ja **ProjectType** eivät ole mukana projektisopimusten oletusarvoisessa yhdistämismäärityksessä.</span><span class="sxs-lookup"><span data-stu-id="4116d-201">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="4116d-202">Voit lisätä yhdistämismääritykset, jos nämä tiedot on synkronoitava projekteissa.</span><span class="sxs-lookup"><span data-stu-id="4116d-202">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="4116d-203">Seuraavissa kuvissa on esimerkkejä mallitehtävien yhdistämismäärityksestä tietojen integroinnissa.</span><span class="sxs-lookup"><span data-stu-id="4116d-203">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="4116d-204">Yhdistämismäärityksessä näytetään kenttätiedot, jotka synkronoidaan Project Service Automationista Financeen.</span><span class="sxs-lookup"><span data-stu-id="4116d-204">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="4116d-205">[![Palvelusopimusmallin yhdistäminen](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4116d-205">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="4116d-206">[![Projektimallin yhdistäminen](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4116d-206">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="4116d-207">[![Palvelusopimusrivimallien yhdistäminen](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4116d-207">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="4116d-208">[![Palvelusopimusrivivälitavoitemallin yhdistäminen](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4116d-208">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="4116d-209">Projektisopimusten rivien välitavoitteiden yhdistämismääritys Projektit ja sopimukset -mallissa (PSA 3.x:stä Dynamicsiin) – v2-malli:</span><span class="sxs-lookup"><span data-stu-id="4116d-209">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="4116d-210">[![Palvelusopimusrivivälitavoitemallin yhdistäminen version kaksi mallilla](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="4116d-210">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]