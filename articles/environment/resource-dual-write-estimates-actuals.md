---
title: Projektiarvioiden ja toteutuneiden kustannusten integrointi
description: Tässä aiheessa on tietoja Project Operationsin kuluarvioiden ja toteutuneiden kulujen integroinnista käyttämällä kaksoiskirjoitusta.
author: sigitac
manager: Annbe
ms.date: 4/26/2021
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: 88df3385fac0a78a827d65a77d3b04c9d6499536
ms.sourcegitcommit: 02f00960198cc78a5e96955a9e4390c2c6393bbf
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 04/28/2021
ms.locfileid: "5955740"
---
# <a name="project-estimates-and-actuals-integration"></a><span data-ttu-id="9213f-103">Projektiarvioiden ja toteutuneiden kustannusten integrointi</span><span class="sxs-lookup"><span data-stu-id="9213f-103">Project estimates and actuals integration</span></span>

<span data-ttu-id="9213f-104">_**Käytetään:** Project Operationsin resursseihin ja ei-varastoitaviin perustuvissa skenaarioissa_</span><span class="sxs-lookup"><span data-stu-id="9213f-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="9213f-105">Tässä aiheessa on tietoja Project Operationsin kuluarvioiden ja toteutuneiden kulujen integroinnista käyttämällä kaksoiskirjoitusta.</span><span class="sxs-lookup"><span data-stu-id="9213f-105">This topic provides information about Project Operations dual-write integration for project estimates and actuals.</span></span>

## <a name="project-estimates"></a><span data-ttu-id="9213f-106">Projektin arviot</span><span class="sxs-lookup"><span data-stu-id="9213f-106">Project estimates</span></span>

<span data-ttu-id="9213f-107">Projektityö-, kulu- ja materiaaliarviot luodaan ja ylläpidetään Microsoft Dataversessä ja synkronoidaan Finance and Operations -sovelluksiin kirjanpitoa varten.</span><span class="sxs-lookup"><span data-stu-id="9213f-107">Project labor, expense, and material estimates are created and maintained in Microsoft Dataverse and synchronized to Finance and Operations apps for accounting purposes.</span></span> <span data-ttu-id="9213f-108">Finance and Operations -sovellusten avulla ei tueta luonti-, päivitys- ja poistotoimintoja.</span><span class="sxs-lookup"><span data-stu-id="9213f-108">Create, update, and delete operations aren't supported through the Finance and Operations apps.</span></span>

<span data-ttu-id="9213f-109">Arvioiden luominen edellyttää projektille kelvollista kirjanpitomääritystä.</span><span class="sxs-lookup"><span data-stu-id="9213f-109">Creating estimates requires a valid accounting configuration for the project.</span></span> <span data-ttu-id="9213f-110">Sopimusriveihin liittyvillä projekteilla on oltava voimassa oleva projekti- ja tuottoprofiili, joka on määritelty projektin kustannus- ja tuottoprofiilisäännöissä.</span><span class="sxs-lookup"><span data-stu-id="9213f-110">Projects that are associated with contract lines must have a valid project cost and revenue profile defined in the Project cost and revenue profile rules.</span></span> <span data-ttu-id="9213f-111">Lisätietoja on ohjeaiheessa [Laskutettavien projektien kirjanpidon määrittäminen](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span><span class="sxs-lookup"><span data-stu-id="9213f-111">For more information, see [Configure accounting for billable projects](../project-accounting/configure-accounting-billable-projects.md#configure-project-cost-and-revenue-profile-rules).</span></span>

## <a name="labor-estimates"></a><span data-ttu-id="9213f-112">Työvoima-arviot</span><span class="sxs-lookup"><span data-stu-id="9213f-112">Labor estimates</span></span>

<span data-ttu-id="9213f-113">Projektipäällikkö tai henkilöstöpäällikkö luo työvoima-arviot, ja he myös delegoivat projektitehtävälle yleisen tai nimetyn resurssin.</span><span class="sxs-lookup"><span data-stu-id="9213f-113">Labor estimates are created by the Project Manager or Resource manager who also assigns a generic or named resource to the project task.</span></span> <span data-ttu-id="9213f-114">Resurssin määritystietueita voi tarkastella **Resurssimääritykset**-välilehden **Projektin tiedot** -sivulla Dataversessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-114">Resource assignment records can be reviewed on the **Resource Assignments** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="9213f-115">Resurssimääritykset Dataversessä luovat tuntiennustetietueet Finance and Operations -sovelluksissa, joissa käytetään **Project Operationsin integrointientiteettiä tuntiarvioita varten (msdyn\_resourceassignments)**.</span><span class="sxs-lookup"><span data-stu-id="9213f-115">Resource assignment records in Dataverse create hour forecast records in Finance and Operations apps using **Project Operations integration entity for hour estimates (msdyn\_resourceassignments)**.</span></span>

   ![Työvoima-arvioiden integrointi](./Media/DW4LaborEstimates.png)

<span data-ttu-id="9213f-117">Kaksoiskirjoitus synkronoi resurssien määritystietueet väliaikaiseen taulukkoon (**ProjCDSEstimateHoursImport**) kanssa ja käyttää sitten liiketoimintalogiikkaa tuntiennustetietueiden luomiseen ja päivittämiseen (**ProjForecastEmpl**).</span><span class="sxs-lookup"><span data-stu-id="9213f-117">Dual-write synchronizes resource assignment records to the staging table (**ProjCDSEstimateHoursImport**), and then uses business logic to create and update hour forecast records (**ProjForecastEmpl**).</span></span>

<span data-ttu-id="9213f-118">Projektin kirjanpitäjä arvioi Finance and Operations -sovelluksissa luodut tuntitietueet valitsemalla **Projektinhallinta ja kirjanpito** > **Kaikki projektit** > **Suunnittele** > **Tuntiennusteet**.</span><span class="sxs-lookup"><span data-stu-id="9213f-118">The Project accountant reviews forecast hour records created in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Hour forecasts**.</span></span>

## <a name="expense-estimates"></a><span data-ttu-id="9213f-119">Kulujen arviot</span><span class="sxs-lookup"><span data-stu-id="9213f-119">Expense estimates</span></span>

<span data-ttu-id="9213f-120">Projektipäällikkö luo kuluarviot **Projektin tiedot** -sivun **Kuluarviot**-välilehdessä Dataversessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-120">Expense estimates are created by the Project manager on the **Expense Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="9213f-121">Kuluarviotietueet tallennetaan **arviorivin** entiteettiin Dataversessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-121">Expense estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="9213f-122">Näillä arviotietueilla on tapahtumaluokka, **kulu** ja ne synkronoidaan Finance and Operations -sovellusten kuluennustetietueisiin käyttämällä **Project Operationsin integrointientiteettiä kuluarvioille (msdyn\_estimatelines)**.</span><span class="sxs-lookup"><span data-stu-id="9213f-122">These estimate records have transaction class, **Expense** and are synchronized to expense forecast records in Finance and Operations apps using **Project Operations integration entity for expense estimates (msdyn\_estimatelines)**.</span></span>

   ![Kuluarvioiden integrointi](./Media/DW4ExpenseEstimates.png)

<span data-ttu-id="9213f-124">Kaksoiskirjoitus synkronoi kuluarviotietueet väliaikaiseen taulukkoon (**ProjCDSEstimateExpenseImport**) kanssa ja käyttää sitten liiketoimintalogiikkaa kuluennustetietueiden luomiseen ja päivittämiseen (**ProjForecastCost**).</span><span class="sxs-lookup"><span data-stu-id="9213f-124">Dual-write synchronizes expense estimate records to the staging table, **ProjCDSEstimateExpenseImport)** and then uses business logic to create and update expense forecast records (**ProjForecastCost**).</span></span> <span data-ttu-id="9213f-125">Arvioriveillä säilytetään myyntiarvio- ja kustannusarviotietueet erikseen.</span><span class="sxs-lookup"><span data-stu-id="9213f-125">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="9213f-126">Finance and Operations -sovellusten liiketoimintalogiikka täyttää yhden kuluennustetietueen käyttämällä tätä erittelyä valmistelutaulukossa.</span><span class="sxs-lookup"><span data-stu-id="9213f-126">The business logic in Finance and Operations apps populates a single Expense forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="9213f-127">Projektin kirjanpitäjä voi arvioida Finance and Operations -sovelluksissa luodut kulutietueet valitsemalla **Projektinhallinta ja kirjanpito** > **Kaikki projektit** > **Suunnittele** > **Kuluennusteet**.</span><span class="sxs-lookup"><span data-stu-id="9213f-127">The Project accountant can review expense forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Expense forecasts**.</span></span>

## <a name="material-estimates"></a><span data-ttu-id="9213f-128">Materiaaliarviot</span><span class="sxs-lookup"><span data-stu-id="9213f-128">Material estimates</span></span>

<span data-ttu-id="9213f-129">Projektipäällikkö luo materiaaliarviot **Projektin tiedot** -sivun **Materiaaliarviot**-välilehdessä Dataversessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-129">Material estimates are created by the Project manager on the **Material Estimates** tab on the **Project Details** page in Dataverse.</span></span> <span data-ttu-id="9213f-130">Materiaaliarviotietueet tallennetaan **arviorivin** entiteettiin Dataversessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-130">Material estimate records are stored in the **Estimate Line** entity in Dataverse.</span></span> <span data-ttu-id="9213f-131">Näillä arviotietueilla on tapahtumaluokka, **materiaali** ja ne synkronoidaan Finance and Operations -sovellusten nimike-ennustetietueisiin käyttämällä **Projektin integrointitaulukkoa materiaaliarvioille (msdyn\_estimatelines)**.</span><span class="sxs-lookup"><span data-stu-id="9213f-131">These estimate records have the transaction class, **Material** and are synchronized to item forecast records in Finance and Operations apps using **Project integration table for material estimates (msdyn\_estimatelines)**.</span></span>

   ![Materiaaliarvioiden integrointi](./Media/DW4MaterialEstimates.png)

<span data-ttu-id="9213f-133">Kaksoiskirjoitus synkronoi materiaaliarviotietueet väliaikaiseen taulukkoon **ProjForecastSalesImpor** kanssa ja käyttää sitten liiketoimintalogiikkaa nimike-ennustetietueiden luomiseen ja päivittämiseen (**ForecastSales**).</span><span class="sxs-lookup"><span data-stu-id="9213f-133">Dual-write synchronizes material estimate records to the staging table **ProjForecastSalesImpor**, and then uses business logic to create and update item forecast records (**ForecastSales**).</span></span> <span data-ttu-id="9213f-134">Arvioriveillä säilytetään myyntiarvio- ja kustannusarviotietueet erikseen.</span><span class="sxs-lookup"><span data-stu-id="9213f-134">Estimate lines store sales estimate and cost estimate records separately.</span></span> <span data-ttu-id="9213f-135">Finance and Operations -sovellusten liiketoimintalogiikka täyttää yhden nimike-ennustetietueen käyttämällä tätä erittelyä valmistelutaulukossa.</span><span class="sxs-lookup"><span data-stu-id="9213f-135">The business logic in Finance and Operations apps populates a single Item forecast record using this detail in the staging table.</span></span>

<span data-ttu-id="9213f-136">Projektin kirjanpitäjä voi arvioida Finance and Operations -sovelluksissa luodut nimike-tietueet valitsemalla **Projektinhallinta ja kirjanpito** > **Kaikki projektit** > **Suunnittele** > **Nimike-ennusteet**.</span><span class="sxs-lookup"><span data-stu-id="9213f-136">The Project accountant can review item forecast records in Finance and Operations apps by going to **Project management and accounting** > **All projects** > **Plan** > **Item forecasts**.</span></span>

## <a name="project-actuals"></a><span data-ttu-id="9213f-137">Projektin todelliset arvot</span><span class="sxs-lookup"><span data-stu-id="9213f-137">Project actuals</span></span>

<span data-ttu-id="9213f-138">Toteutuneet projektit luodaan Dataversessä ajan, kulun, materiaalin ja laskutusaktiviteetin perusteella.</span><span class="sxs-lookup"><span data-stu-id="9213f-138">Project actuals are created in Dataverse, based on time, expense, material, and billing activity.</span></span> <span data-ttu-id="9213f-139">Kaikki näiden tapahtumien toiminnalliset määritteet, kuten määrä, kustannushinta, myyntihinta ja projekti, tallennetaan tähän Dataverse-entiteettiin.</span><span class="sxs-lookup"><span data-stu-id="9213f-139">All operational attributes of these transactions including quantity, cost price, sales price, and project are captured in this Dataverse entity.</span></span> <span data-ttu-id="9213f-140">Lue lisätietoja kohdasta [Todelliset arvot](../actuals/actuals-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9213f-140">For more information, see [Actuals](../actuals/actuals-overview.md).</span></span> <span data-ttu-id="9213f-141">Todelliset tiedot synkronoidaan Finance and Operations -sovelluksiin käyttämällä kaksoiskirjoitustaulukkokarttaa **Project Operationsin integrointien toteutuneet (msdyn\_actuals)** loppupään kirjanpitoa varten.</span><span class="sxs-lookup"><span data-stu-id="9213f-141">Actual records are synchronized to Finance and Operations apps using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)** for downstream accounting.</span></span>

   ![Todellisten kustannusten integrointi](./Media/DW4Actuals.png)

<span data-ttu-id="9213f-143">**Projektitoimintojen integroinnin toteutuneet** -taulukkokartta synkronoi kaikki tietueet **Toteutuneet kustannukset** -entiteetistä Dataversessä ja määritteen **Ohita synkronointi (vain sisäiseen käyttöön)** arvoksi on määritetty **Epätosi**.</span><span class="sxs-lookup"><span data-stu-id="9213f-143">The **Project Operations integration actuals** table map synchronizes all the records from the **Actuals** entity in Dataverse, with the attribute **Skip Sync (internal use only)** set to **False**.</span></span> <span data-ttu-id="9213f-144">Tämä määritteen arvo määritetään Dataversessä automaattisesti, kun tietue luodaan.</span><span class="sxs-lookup"><span data-stu-id="9213f-144">This attribute value is set in Dataverse automatically when the record is created.</span></span> <span data-ttu-id="9213f-145">Esimerkkejä, joissa määritteen arvoksi on määritetty **Tosi**:</span><span class="sxs-lookup"><span data-stu-id="9213f-145">Examples where this attribute is set to **True** are:</span></span>

  - <span data-ttu-id="9213f-146">Konsernin sisäisten tapahtumien toteutuneet projektikustannukset.</span><span class="sxs-lookup"><span data-stu-id="9213f-146">Project cost actuals for intercompany transactions.</span></span> <span data-ttu-id="9213f-147">Lisätietoja on ohjeaiheessa [Konsernin sisäisten tapahtumien luominen](../project-accounting/create-intercompany-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="9213f-147">For more information, see [Create intercompany transactions](../project-accounting/create-intercompany-transactions.md).</span></span> <span data-ttu-id="9213f-148">Nämä tietueet ohitetaan, koska järjestelmä luo projektin kustannuksen uudelleen Finance and Operations -sovelluksissa, kun konsernin toimittajan lasku on julkaistu.</span><span class="sxs-lookup"><span data-stu-id="9213f-148">These records are skipped because the system recreates the project cost actual in Finance and Operations apps when the intercompany vendor invoice is posted.</span></span>
  - <span data-ttu-id="9213f-149">Negatiiviset laskuttamattomat myyntitietueet, jotka luodaan proformalaskun vahvistuksen yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="9213f-149">Negative unbilled sales records created when the proforma invoice is confirmed.</span></span> <span data-ttu-id="9213f-150">Nämä tietueet ohitetaan, koska Finance and Operations -sovellusten projektin alareskontra ei palauta laskuttamatonta myyntitietuetta laskutuksessa, vaan tilaksi tulee kokonaan laskutettu.</span><span class="sxs-lookup"><span data-stu-id="9213f-150">These records are skipped because the project subledger in Finance and Operations apps doesn't reverse the unbilled sales record at invoicing but changes the status to fully invoiced.</span></span>

<span data-ttu-id="9213f-151">Kaksoiskirjoitustaulukkopöytä synkronoi toteutuneet tietueet väliaikaista taulukkoa, **ProjCDSActualsImport** varten.</span><span class="sxs-lookup"><span data-stu-id="9213f-151">The dual-write table map synchronizes the actuals records to the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="9213f-152">Nämä tietueet käsitellään jaksottaisen prosessin **Tuo valmistelutaulukosta** luotaessa Project Operationsin integrointikirjausrivejä ja projektin laskuehdotusrivejä.</span><span class="sxs-lookup"><span data-stu-id="9213f-152">These records are processed by the periodic process **Import from staging table** when creating Project Operations integration journal lines and project invoice proposal lines.</span></span> <span data-ttu-id="9213f-153">Lisätietoja on kohdassa [Integrointikirjauskansio Project Operationsissa](../project-accounting/project-operations-integration-journal.md).</span><span class="sxs-lookup"><span data-stu-id="9213f-153">For more information, see [Integration journal in Project Operations](../project-accounting/project-operations-integration-journal.md).</span></span>

<span data-ttu-id="9213f-154">Dataverse sisältää myös projektin toteutuneiden tapahtumien väliset linkit **Tapahtumayhteys** entiteettiin.</span><span class="sxs-lookup"><span data-stu-id="9213f-154">Dataverse also captures the links between the project actual transactions in the **Transaction connection** entity.</span></span> <span data-ttu-id="9213f-155">Lisätietoja on ohjeaiheessa [Toteutuneiden kustannusten linkitäminen alkuperäisiin tietueisiin](../actuals/linkingactuals.md).</span><span class="sxs-lookup"><span data-stu-id="9213f-155">For more information, see [Link actuals to original records](../actuals/linkingactuals.md).</span></span> <span data-ttu-id="9213f-156">Myös todellisten tapahtumien väliset linkit synkronoidaan Finance and Operations -sovelluksiin käyttämällä kaksoiskirjoitustaulukkokarttaa **Projektitapahtumasuhteiden integrointientiteetit (msdyn\_transactionconnections)**.</span><span class="sxs-lookup"><span data-stu-id="9213f-156">Links between actual transactions are also synchronized to Finance and Operations apps using the dual-write table map, **Integration entity for project transaction relationships (msdyn\_transactionconnections)**.</span></span> <span data-ttu-id="9213f-157">Näitä tietueita käytetään jaksottaisen prosessin **Tuo valmistelutaulukosta** luotaessa Project Operationsin integrointikirjausrivejä ja projektin laskuehdotusrivejä.</span><span class="sxs-lookup"><span data-stu-id="9213f-157">These records are used by the periodic process, **Import from staging table** when creating Project Operations integration journal lines and Project invoice proposal lines.</span></span>

<span data-ttu-id="9213f-158">Projektitoimintojen integrointikirjauksen ja projektilaskun ehdotuksen lähettäminen käynnistää päivityksen väliaikaista taulukkoa vastaaviin tietueisiin, **IntegraCDSActualsImport**-tietueeseen.</span><span class="sxs-lookup"><span data-stu-id="9213f-158">Posting a Project Operations integration journal and a project invoice proposal triggers an update in respective records in the staging table, **ProjCDSActualsImport**.</span></span> <span data-ttu-id="9213f-159">Järjestelmä kerää ja kirjaa seuraavat toteutuneiden tapahtumien kirjanpitomääritteet:</span><span class="sxs-lookup"><span data-stu-id="9213f-159">The system captures and records the following accounting attributes for actuals transactions:</span></span>

- <span data-ttu-id="9213f-160">Kirjanpidon valuuttamäärä</span><span class="sxs-lookup"><span data-stu-id="9213f-160">Accounting currency amount</span></span>
- <span data-ttu-id="9213f-161">Valuuttakurssi</span><span class="sxs-lookup"><span data-stu-id="9213f-161">Exchange rate</span></span>
- <span data-ttu-id="9213f-162">Tositenumero</span><span class="sxs-lookup"><span data-stu-id="9213f-162">Voucher number</span></span>
- <span data-ttu-id="9213f-163">Arvonlisäveron summa</span><span class="sxs-lookup"><span data-stu-id="9213f-163">Sales tax amount</span></span>

<span data-ttu-id="9213f-164">**Project Operationsin integroinnin toteutuneet** -taulukko päivittää toteutuneet tietueet Dataversessä näiden tietojen avulla.</span><span class="sxs-lookup"><span data-stu-id="9213f-164">The **Project Operations integration actuals** table map updates respective actuals records in Dataverse with this information.</span></span>
